/*
 laurenashpole 2018-01-31 
*/

var App=App||{};App.Utilities=function(){function a(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a}function b(a,b,c){var d=new XMLHttpRequest;d.open("POST",a),d.setRequestHeader("Content-Type","application/json; charset=UTF-8"),d.onload=function(){if(200===d.status){var a=JSON.parse(d.responseText);c instanceof Function&&c(a)}},d.send(JSON.stringify(b))}return{extend:a,request:b}}();var App=App||{};App.View=App.View||{},App.View.Base=function(){function a(){}return a.prototype={setup:function(a,b){this.options=a||{},this.el=this.options.el||"html",this.$el=document.querySelector(this.el),b&&this.parseEvents(b)},parseEvents:function(a){for(var b in a){var c,d=b.split(" ")[0],e=b.split(" ")[1],f=a[b];c=e?this.$el.querySelectorAll(e):this.$el?[this.$el]:[],d&&c.length>0&&f&&this.initEventListeners(d,c,f)}},initEventListeners:function(a,b,c){for(var d=this,e=0,f=b.length;e<f;e++)b[e].addEventListener(a,function(a){d[c]instanceof Function&&d[c](a)},!1)}},a}();var App=App||{};App.View=App.View||{},App.View.Analytics=function(){function a(a){this.setup(a,b)}var b={"click .js-ga-trigger":"sentEvent"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{sendEvent:function(a){var b=a.target.dataset.gaCategory,c=a.target.dataset.gaAction,d=a.target.dataset.gaLabel;console.log(b),ga("send","event",b,c,d)}}),a}();var App=App||{};App.View=App.View||{},App.View.Contact=function(){function a(a){this.setup(a,b),this.cacheSelectors()}var b={"click .js-contact-send":"sendMessage","focus .js-contact-form-input":"removeError"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{cacheSelectors:function(){this.$button=this.$el.querySelector(".js-contact-send"),this.$inputs=this.$el.querySelectorAll(".js-contact-form-input")},removeError:function(a){a.preventDefault(),a.target.classList.remove("is-required")},sendMessage:function(a){a.preventDefault();var b=this.parseForm();if(!b.valid)return!1;this.$button.classList.add("is-processing"),App.Utilities.request("/contact/send",b.data,this.afterSend.bind(this))},afterSend:function(a){a.success&&(window.location="contact/confirm")},parseForm:function(){for(var a=/\S+@\S+\.\S+/,b={valid:!0,data:{}},c=0,d=this.$inputs.length;c<d;c++){var e=this.$inputs[c];e.value<1?(e.classList.add("is-required"),b.valid=!1):("email"===e.type&&(a.test(e.value)||(e.classList.add("is-required"),b.valid=!1)),b.data[e.name]=e.value)}return b}}),a}();var App=App||{};App.View=App.View||{},App.View.DownloadButton=function(){function a(a){this.setup(a,b),this.firstClick=!0}var b={click:"onClick"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{onClick:function(a){a.preventDefault();var b=window.localStorage.getItem("hideEmailModal");this.firstClick&&(this.cacheValues(),this.firstClick=!1),b?(this.sendEvent("Download"),window.location=this.downloadUrl):this.initModal(a)},cacheValues:function(){this.gaCategory=this.$el.dataset.gaCategory,this.gaAction=this.$el.dataset.gaAction,this.downloadUrl=this.$el.href},initModal:function(a){this.modal||(this.modal=new App.View.Modal({modalClass:".js-modal-container",openCallback:this.initMailing.bind(this),closeCallback:this.download.bind(this)})),this.sendEvent("Download Modal"),this.modal.open(a)},initMailing:function(){var a=this;this.mailing||(this.mailing=new App.View.Mailing({el:".js-modal-container .js-modal-mailing-form"})),this.mailing.$el.addEventListener("onSignup",function(b){setTimeout(function(){a.modal.close(b)},1500)})},download:function(){window.location=this.downloadUrl,window.localStorage.setItem("hideEmailModal",!0)},sendEvent:function(a){ga("send","event",this.gaCategory,this.gaAction,a)}}),a}();var App=App||{};App.View=App.View||{},App.View.Filter=function(){function a(a){this.setup(a,b),this.firstClick=!0,this.cacheSelectors(),this.init()}var b={"click .js-filter-reset":"reset"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{cacheSelectors:function(){this.$searchItems=this.$el.querySelectorAll(".js-filter-item"),this.$noResults=this.$el.querySelector(".js-filter-no-results"),this.$input=this.$el.querySelector(".js-filter-input"),this.$reset=this.$el.querySelector(".js-filter-reset")},init:function(){new App.View.FormBind({el:".js-filter-input",eventType:"keyup",callback:this.updateResults.bind(this)})},updateResults:function(a,b){var c=0,d=a.toUpperCase();if(b&&27===b.which)return void this.reset();this.firstClick&&(this.$el.classList.remove("not-filtered"),this.firstClick=!1,this.options.gaCategory&&ga("send","event",this.options.gaCategory,"keyup","filter"));for(var e=0,f=this.$searchItems.length;e<f;e++){var g=this.$searchItems[e],h=!1;g.dataset.filterTerm&&g.dataset.filterTerm.toUpperCase().indexOf(d)>-1?(g.classList.remove("u--hidden"),c++):(g.classList.add("u--hidden"),h=!0),this.options.itemCallback&&this.options.itemCallback instanceof Function&&this.options.itemCallback(g,h,c)}0===a.length?this.$reset.classList.remove("is-active"):this.$reset.classList.add("is-active"),0===c?this.$noResults.classList.remove("u--hidden"):this.$noResults.classList.add("u--hidden")},reset:function(a){this.$input.value="",this.updateResults("")}}),a}();var App=App||{};App.View=App.View||{},App.View.FormBind=function(){function a(a){if(a.eventType){var b={};b[a.eventType]="onChange",this.setup(a,b)}}return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{onChange:function(a){a.preventDefault();var b=a.target.value;this.options.callback&&this.options.callback instanceof Function&&this.options.callback(b,a)}}),a}();var App=App||{};App.View=App.View||{},App.View.Gallery=function(){function a(a){this.setup(a,b),this.cacheSelectors()}var b={"click .js-font-image-thumbnail":"updateImage"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{cacheSelectors:function(){this.$imageContainer=this.$el.querySelector(".js-font-image-main")},updateImage:function(a){a.preventDefault();var b="/images/fonts/"+a.target.getAttribute("data-image");this.$imageContainer.src=b}}),a}();var App=App||{};App.View=App.View||{},App.View.Modal=function(){function a(a){this.setup(a,b),this.cacheSelectors()}var b={"click .js-open-modal":"open","click .js-close-modal":"close"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{cacheSelectors:function(){this.$modal=this.$el.querySelector(this.options.modalClass)},open:function(a){a.preventDefault(),this.$modal.classList.add("is-open"),this.$el.classList.add("modal-open"),this.options.openCallback&&this.options.openCallback instanceof Function&&this.options.openCallback(a)},close:function(a){if(a.preventDefault(),a.target.classList.contains("js-close-modal")){var b=a.target.getAttribute("data-cancel-callback");this.$modal.classList.remove("is-open"),this.$el.classList.remove("modal-open"),!b&&this.options.closeCallback&&this.options.closeCallback instanceof Function&&this.options.closeCallback(a)}}}),a}();var App=App||{};App.View=App.View||{},App.View.Mailing=function(){function a(a){this.setup(a,b),this.cacheSelectors()}var b={"click .js-mailing-signup":"signup"};return a.prototype=App.Utilities.extend(Object.create(App.View.Base.prototype),{cacheSelectors:function(){this.$button=this.$el.querySelector(".js-mailing-signup")},signup:function(a){a.preventDefault();var b={email:this.$el.email.value};if(!this.validateEmail(b.email))return this.$button.classList.add("is-error"),!1;this.$button.classList.add("is-processing"),App.Utilities.request(this.$el.action,b,this.afterSignup.bind(this))},afterSignup:function(a){if(this.$button.classList.remove("is-processing"),a.success){var b=new Event("onSignup");this.$el.dispatchEvent(b),this.$button.innerHTML="Success!"}else this.$button.innerHTML="Error! Try again."},validateEmail:function(a){var b=!0,c=/\S+@\S+\.\S+/;return a&&c.test(a)||(b=!1),b}}),a}();var App=App||{};App.Page=App.Page||{},App.Page.Base=function(){function a(){b(),c();new App.View.Analytics,new App.View.Mailing({el:".js-mailing-form"})}function b(){window.addEventListener("touchstart",function a(){document.querySelector("html").classList.remove("is-not-touch","no-touch"),window.removeEventListener("touchstart",a,!1)},!1)}function c(){"email"===d("referrer")&&window.localStorage.setItem("hideEmailModal",!0)}function d(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}return{init:a}}();var App=App||{};App.Page=App.Page||{},App.Page.Font=function(){function a(){(e=document.querySelector(".js-font-page"))&&(b(),c(),d())}function b(){f=document.querySelector("head"),g=document.querySelector("body"),h=e.querySelectorAll(".js-font-example")}function c(){var a=e.getAttribute("data-css")||!1;a&&(f.innerHTML+='<link rel="stylesheet" href="'+a+'">',g.classList.remove("css-loading"))}function d(){new App.View.DownloadButton({el:".js-font-modal-open"}),new App.View.FormBind({el:".js-font-example-input",eventType:"keyup",callback:function(a){0===a.length&&(a="Enter your preview text");for(var b=0,c=h.length;b<c;b++)h[b].textContent=a}}),new App.View.FormBind({el:".js-font-example-size",eventType:"change",callback:function(a){for(var b=0,c=h.length;b<c;b++)h[b].style["font-size"]=a+"px"}}),new App.View.Gallery({el:".js-font-page"})}var e,f,g,h;return{init:a}}();var App=App||{};App.Page=App.Page||{},App.Page.Fonts=function(){function a(){b()}function b(){new App.View.Filter({el:".js-font-filter",gaCategory:"Fonts",itemCallback:function(a,b,c){a.classList.remove("is-2n-2","is-3n-3","is-3n-2"),b||(c%2==0&&a.classList.add("is-2n-2"),c%3==0?a.classList.add("is-3n-3"):2===Math.abs(c%3)&&a.classList.add("is-3n-2"))}})}return{init:a}}();var App=App||{};App.Page=App.Page||{},App.Page.Contact=function(){function a(){if($el=document.querySelector(".js-contact-form"),$el){new App.View.Contact({el:".js-contact-form"})}}return{init:a}}();var VanillaTilt=function(){"use strict";var a=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b=function(){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,b),!(c instanceof Node))throw"Can't initialize VanillaTilt because "+c+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.element=c,this.settings=this.extendSettings(d),this.settings.parent&&(this.children=this.element.querySelectorAll("[data-tilt-child]")),this.reverse=this.settings.reverse?-1:1,this.addEventListeners()}return b.prototype.addEventListeners=function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind)},b.prototype.removeEventListeners=function(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind)},b.prototype.destroy=function(){this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null},b.prototype.onMouseEnter=function(a){if(this.updateElementPosition(),this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++)this.children[b].style.willChange="transform";else this.element.style.willChange="transform";this.setTransition()},b.prototype.onMouseMove=function(a){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=a,this.updateCall=requestAnimationFrame(this.updateBind)},b.prototype.onMouseLeave=function(a){this.setTransition(),this.settings.reset&&this.reset()},b.prototype.reset=function(){var a=this;requestAnimationFrame(function(){if(a.event={pageX:a.left+a.width/2,pageY:a.top+a.height/2},a.settings.parent&&a.children)for(var b=0;b<a.children.length;b++)a.children[b].style.transform="perspective("+a.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)";else a.element.style.transform="perspective("+a.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})},b.prototype.getValues=function(){var a=(this.event.clientX-this.left)/this.width,b=(this.event.clientY-this.top)/this.height;return a=Math.min(Math.max(a,0),1),b=Math.min(Math.max(b,0),1),{tiltX:(this.reverse*(this.settings.max/2-a*this.settings.max)).toFixed(2),tiltY:(this.reverse*(b*this.settings.max-this.settings.max/2)).toFixed(2),percentageX:100*a,percentageY:100*b}},b.prototype.updateElementPosition=function(){var a=this.element.getBoundingClientRect();this.width=a.width,this.height=a.height,this.left=a.left,this.top=a.top},b.prototype.update=function(){var a=this.getValues();if(this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++){var c=this.children[b].getAttribute("data-tilt-z")||"0px";this.children[b].style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:a.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:a.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+") translateZ("+c+")"}else this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:a.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:a.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")";this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:a})),this.updateCall=null},b.prototype.setTransition=function(){var a=this;if(clearTimeout(this.transitionTimeout),this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++)this.children[b].style.transition=this.settings.speed+"ms "+this.settings.easing;else this.element.style.transition=this.settings.speed+"ms "+this.settings.easing;this.transitionTimeout=setTimeout(function(){if(a.settings.parent&&a.children)for(var b=0;b<a.children.length;b++)a.children[b].style.transition="";else a.element.style.transition=""},this.settings.speed)},b.prototype.extendSettings=function(a){var b={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,reset:!0,parent:!1},c={};for(var d in b)if(d in a)c[d]=a[d];else if(this.element.hasAttribute("data-tilt-"+d)){var e=this.element.getAttribute("data-tilt-"+d);try{c[d]=JSON.parse(e)}catch(a){c[d]=e}}else c[d]=b[d];return c},b.init=function(a,c){a instanceof Node&&(a=[a]),a instanceof NodeList&&(a=[].slice.call(a)),a instanceof Array&&a.forEach(function(a){"vanillaTilt"in a||(a.vanillaTilt=new b(a,c))})},b}();return"undefined"!=typeof document&&(window.VanillaTilt=b,b.init(document.querySelectorAll("[data-tilt]"))),b}(),App=App||{};App.Router=function(){var a=window.location.pathname;App.Page.Base.init(),-1!==a.indexOf("fonts")&&(a.match(/fonts\/(.*)/)[1]?App.Page.Font.init():App.Page.Fonts.init()),-1!==a.indexOf("contact")&&App.Page.Contact.init()}();