/*
 laurenashpole 2017-08-23 
*/
function View(a){a=a||{},this.el=a.el||document,a.events&&this.initEvents(a.events)}function Analytics(a){var b={events:[{selector:".js-ga-trigger",eventType:"click",callback:this.sendEvent.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}function Modal(a){var b={events:[{selector:".js-open-modal",eventType:"click",callback:this.openModal.bind(this)},{selector:".js-close-modal",eventType:"click",callback:this.closeModal.bind(this)},{selector:".js-close-modal-background",eventType:"click",callback:this.closeModalBackground.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}function Mailing(a){var b={el:document.querySelector(".js-mailing-form"),events:[{selector:".js-mailing-signup",eventType:"click",callback:this.signup.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options),this.cacheSelectors()}function All(){this.initialize()}function Font(a){var b={el:document.querySelector(".js-font-page"),events:[{selector:".js-font-example-input",eventType:"keyup",callback:this.updateFontExampleText.bind(this)},{selector:".js-font-example-size",eventType:"change",callback:this.updateFontExampleSize.bind(this)},{selector:".js-font-image-thumbnail",eventType:"click",callback:this.updateFontImageThumbnail.bind(this)},{selector:".js-font-modal-open",eventType:"click",callback:this.openDownloadModal.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options),this.el instanceof HTMLDocument||(this.cacheSelectors(),this.injectCSS())}function Contact(a){var b={el:document.querySelector(".js-contact-form"),events:[{selector:".js-contact-send",eventType:"click",callback:this.sendMessage.bind(this)},{selector:".js-contact-form-input",eventType:"focus",callback:this.removeError.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}View.prototype.initEvents=function(a){for(var b=0;b<a.length;b++)a[b].selector&&a[b].eventType&&a[b].callback&&this.addEventListener(a[b].selector,a[b].eventType,a[b].callback)},View.prototype.addEventListener=function(a,b,c){for(var d=this.el?this.el.querySelectorAll(a):document.querySelectorAll(a),e=0;e<d.length;e++)d[e].addEventListener(b,function(a){c instanceof Function&&c(a)})},View.prototype.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},Analytics.prototype=new View,Analytics.prototype.sendEvent=function(a){var b=a.target.dataset.gaCategory,c=a.target.dataset.gaAction,d=a.target.dataset.gaLabel;ga("send","event",b,c,d)},Modal.prototype=new View,Modal.prototype.openModal=function(a){a.preventDefault(),this.options.modal.classList.add("is-open"),document.querySelector("html").classList.add("modal-open"),this.options.openCallback&&this.options.openCallback instanceof Function&&this.options.openCallback(a)},Modal.prototype.closeModal=function(a){a.preventDefault(),this.options.modal.classList.remove("is-open"),document.querySelector("html").classList.remove("modal-open"),this.options.closeCallback&&this.options.closeCallback instanceof Function&&this.options.closeCallback(a)},Modal.prototype.closeModalBackground=function(a){a.target.classList.contains("js-close-modal-background")&&(a.preventDefault(),this.options.modal.classList.remove("is-open"),document.querySelector("html").classList.remove("modal-open"))},Mailing.prototype=new View,Mailing.prototype.cacheSelectors=function(){this.button=this.el.querySelector(".js-mailing-signup")},Mailing.prototype.signup=function(a){a.preventDefault();var b=this,c=this.el.email.value;if(!this.validateForm(c))return this.button.classList.add("is-error"),!1;this.button.classList.add("is-processing");var d=new XMLHttpRequest;d.open("POST",this.el.action),d.setRequestHeader("Content-Type","application/json; charset=UTF-8"),d.onload=function(){if(200===d.status){var c=JSON.parse(d.responseText);b.afterSignup.call(b,c,a)}},d.send(JSON.stringify({email:c}))},Mailing.prototype.afterSignup=function(a,b){if(this.button.classList.remove("is-processing"),a.success){var c=new Event("onSignup");this.el.dispatchEvent(c),this.button.innerHTML="Success!"}else this.button.innerHTML="Error! Try again."},Mailing.prototype.validateForm=function(a){var b=!0,c=/\S+@\S+\.\S+/;return a&&c.test(a)||(b=!1),b},All.prototype.initialize=function(){new Analytics,new Mailing;this.checkTouch(),this.checkReferrer()},All.prototype.checkTouch=function(){window.addEventListener("touchstart",function a(){document.querySelector("html").classList.remove("is-not-touch","no-touch"),window.removeEventListener("touchstart",a,!1)},!1)},All.prototype.checkReferrer=function(){var a=this.getUrlParameter("referrer");"email"===a&&window.localStorage.setItem("hideEmailModal",!0)},All.prototype.getUrlParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},Font.prototype=new View,Font.prototype.cacheSelectors=function(){this.head=document.querySelector("head"),this.body=document.querySelector("body"),this.textContainer=this.el.querySelectorAll(".font-example-text"),this.imageContainer=this.el.querySelector(".js-font-image-main"),this.modalContainer=this.el.querySelector(".js-modal-container")},Font.prototype.injectCSS=function(){var a=this.el.getAttribute("data-css")||!1;a&&(this.head.innerHTML+='<link rel="stylesheet" href="'+a+'">',this.body.classList.remove("css-loading"))},Font.prototype.updateFontExampleText=function(a){a.preventDefault();var b=a.target.value;0===b.length&&(b="Enter your preview text");for(var c=0;c<this.textContainer.length;c++)this.textContainer[c].textContent=b},Font.prototype.updateFontExampleSize=function(a){a.preventDefault();for(var b=a.target.value,c=0;c<this.textContainer.length;c++)this.textContainer[c].style["font-size"]=b+"px"},Font.prototype.updateFontImageThumbnail=function(a){a.preventDefault();var b="/images/fonts/"+a.target.getAttribute("data-image");this.imageContainer.src=b},Font.prototype.openDownloadModal=function(a){a.preventDefault();var b=a.currentTarget,c=b.href,d=window.localStorage.getItem("hideEmailModal"),e=b.dataset.gaCategory,f=b.dataset.gaAction;d?(ga("send","event",e,f,"Download"),window.location=c):this.initDownloadModal(a,e,f,c)},Font.prototype.initDownloadModal=function(a,b,c,d){var e=this,f=new Modal({modal:this.modalContainer,openCallback:function(){var a=new Mailing({el:e.modalContainer.querySelector(".js-modal-mailing-form")});a.el.addEventListener("onSignup",function(a){setTimeout(function(){f.closeModal(a)},1500)})},closeCallback:function(){window.location=d,window.localStorage.setItem("hideEmailModal",!0)}});ga("send","event",b,c,"Download Modal"),f.openModal(a)},Contact.prototype=new View,Contact.prototype.removeError=function(a){a.preventDefault(),a.target.classList.remove("is-required")},Contact.prototype.sendMessage=function(a){if(a.preventDefault(),!this.validateForm())return!1;this.el.querySelector(".js-contact-send").classList.add("is-processing");var b=this,c=new XMLHttpRequest,d={senderEmail:this.el.senderEmail.value,senderName:this.el.senderName.value,subject:this.el.subject.value,message:this.el.message.value};c.open("POST","/contact/send"),c.setRequestHeader("Content-Type","application/json; charset=UTF-8"),c.onload=function(){if(200===c.status){var d=JSON.parse(c.responseText);b.afterSend.call(b,d,a)}},c.send(JSON.stringify(d))},Contact.prototype.afterSend=function(a,b){a.success&&(window.location="contact/confirm")},Contact.prototype.validateForm=function(){var a=!0,b=/\S+@\S+\.\S+/,c={senderEmail:this.el.senderEmail,senderName:this.el.senderName,message:this.el.message};for(var d in c)c.hasOwnProperty(d)&&c[d].value.length<1&&(c[d].classList.add("is-required"),a=!1);return b.test(c.senderEmail.value)||(c.senderEmail.classList.add("is-required"),a=!1),a};var VanillaTilt=function(){"use strict";var a=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b=function(){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,b),!(c instanceof Node))throw"Can't initialize VanillaTilt because "+c+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.element=c,this.settings=this.extendSettings(d),this.settings.parent&&(this.children=this.element.querySelectorAll("[data-tilt-child]")),this.reverse=this.settings.reverse?-1:1,this.addEventListeners()}return b.prototype.addEventListeners=function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind)},b.prototype.removeEventListeners=function(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind)},b.prototype.destroy=function(){this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null},b.prototype.onMouseEnter=function(a){if(this.updateElementPosition(),this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++)this.children[b].style.willChange="transform";else this.element.style.willChange="transform";this.setTransition()},b.prototype.onMouseMove=function(a){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=a,this.updateCall=requestAnimationFrame(this.updateBind)},b.prototype.onMouseLeave=function(a){this.setTransition(),this.settings.reset&&this.reset()},b.prototype.reset=function(){var a=this;requestAnimationFrame(function(){if(a.event={pageX:a.left+a.width/2,pageY:a.top+a.height/2},a.settings.parent&&a.children)for(var b=0;b<a.children.length;b++)a.children[b].style.transform="perspective("+a.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)";else a.element.style.transform="perspective("+a.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})},b.prototype.getValues=function(){var a=(this.event.clientX-this.left)/this.width,b=(this.event.clientY-this.top)/this.height;a=Math.min(Math.max(a,0),1),b=Math.min(Math.max(b,0),1);var c=(this.reverse*(this.settings.max/2-a*this.settings.max)).toFixed(2),d=(this.reverse*(b*this.settings.max-this.settings.max/2)).toFixed(2);return{tiltX:c,tiltY:d,percentageX:100*a,percentageY:100*b}},b.prototype.updateElementPosition=function(){var a=this.element.getBoundingClientRect();this.width=a.width,this.height=a.height,this.left=a.left,this.top=a.top},b.prototype.update=function(){var a=this.getValues();if(this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++){var c=this.children[b].getAttribute("data-tilt-z")||"0px";this.children[b].style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:a.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:a.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+") translateZ("+c+")"}else this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:a.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:a.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")";this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:a})),this.updateCall=null},b.prototype.setTransition=function(){var a=this;if(clearTimeout(this.transitionTimeout),this.settings.parent&&this.children)for(var b=0;b<this.children.length;b++)this.children[b].style.transition=this.settings.speed+"ms "+this.settings.easing;else this.element.style.transition=this.settings.speed+"ms "+this.settings.easing;this.transitionTimeout=setTimeout(function(){if(a.settings.parent&&a.children)for(var b=0;b<a.children.length;b++)a.children[b].style.transition="";else a.element.style.transition=""},this.settings.speed)},b.prototype.extendSettings=function(a){var b={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,reset:!0,parent:!1},c={};for(var d in b)if(d in a)c[d]=a[d];else if(this.element.hasAttribute("data-tilt-"+d)){var e=this.element.getAttribute("data-tilt-"+d);try{c[d]=JSON.parse(e)}catch(a){c[d]=e}}else c[d]=b[d];return c},b.init=function(a,c){a instanceof Node&&(a=[a]),a instanceof NodeList&&(a=[].slice.call(a)),a instanceof Array&&a.forEach(function(a){"vanillaTilt"in a||(a.vanillaTilt=new b(a,c))})},b}();return"undefined"!=typeof document&&(window.VanillaTilt=b,b.init(document.querySelectorAll("[data-tilt]"))),b}();!function(){new All;if(window.location.href.indexOf("fonts/")!==-1){new Font}if(window.location.href.indexOf("contact")!==-1){new Contact}}();