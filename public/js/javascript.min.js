/*
 laurenashpole 2017-03-15 
*/
function View(a){a=a||{},this.el=a.el||document,a.events&&this.initEvents(a.events)}function Analytics(a){var b={events:[{selector:".js-ga-trigger",eventType:"click",callback:this.sendEvent.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}function Nav(a){var b={el:document.querySelector(".js-nav"),events:[{selector:".js-nav-icon",eventType:"click",callback:this.toggleNav.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}function Modal(a){var b={events:[{selector:".js-open-modal",eventType:"click",callback:this.openModal.bind(this)},{selector:".js-close-modal",eventType:"click",callback:this.closeModal.bind(this)},{selector:".js-close-modal-background",eventType:"click",callback:this.closeModalBackground.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}function All(){this.initialize()}function Font(a){var b={el:document.querySelector(".js-font-page"),events:[{selector:".js-font-example-input",eventType:"keyup",callback:this.updateFontExampleText.bind(this)},{selector:".js-font-example-size",eventType:"change",callback:this.updateFontExampleSize.bind(this)},{selector:".js-font-image-thumbnail",eventType:"click",callback:this.updateFontImageThumbnail.bind(this)},{selector:".js-font-modal-open",eventType:"click",callback:this.openDownloadModal.bind(this)},{selector:".js-font-modal-signup",eventType:"click",callback:this.updateDownloadModal.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options),this.cacheSelectors()}function Contact(a){var b={el:document.querySelector(".js-contact-form"),events:[{selector:".js-contact-send",eventType:"click",callback:this.sendMessage.bind(this)},{selector:".js-contact-form-input",eventType:"focus",callback:this.removeError.bind(this)}]};this.options=this.extend(b,a),View.call(this,this.options)}View.prototype.initEvents=function(a){for(var b=0;b<a.length;b++)a[b].selector&&a[b].eventType&&a[b].callback&&this.addEventListener(a[b].selector,a[b].eventType,a[b].callback)},View.prototype.addEventListener=function(a,b,c){for(var d=this.el?this.el.querySelectorAll(a):document.querySelectorAll(a),e=0;e<d.length;e++)d[e].addEventListener(b,function(a){c instanceof Function&&c(a)})},View.prototype.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},Analytics.prototype=new View,Analytics.prototype.sendEvent=function(a){var b=a.target.dataset.gaCategory,c=a.target.dataset.gaAction,d=a.target.dataset.gaLabel;ga("send","event",b,c,d)},Nav.prototype=new View,Nav.prototype.toggleNav=function(a){a.preventDefault(),this.el.classList.contains("is-open")?this.el.classList.remove("is-open"):this.el.classList.add("is-open")},Modal.prototype=new View,Modal.prototype.openModal=function(a){a.preventDefault(),this.options.modal.classList.add("is-open"),document.querySelector("html").classList.add("modal-open")},Modal.prototype.closeModal=function(a){a.preventDefault(),this.options.modal.classList.remove("is-open"),document.querySelector("html").classList.remove("modal-open"),this.options.callback&&this.options.callback instanceof Function&&this.options.callback(a)},Modal.prototype.closeModalBackground=function(a){a.preventDefault(),this.options.modal.classList.remove("is-open"),document.querySelector("html").classList.remove("modal-open")},All.prototype.initialize=function(){window.localStorage.clear();new Analytics,new Nav;this.checkHover(),this.checkReferrer()},All.prototype.checkHover=function(){window.addEventListener("mouseover",function a(){document.querySelector("html").classList.add("has-hover"),window.removeEventListener("mouseover",a,!1)},!1)},All.prototype.checkReferrer=function(){var a=this.getUrlParameter("referrer");"email"===a&&window.localStorage.setItem("hideEmailModal",!0)},All.prototype.getUrlParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(window.location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},Font.prototype=new View,Font.prototype.cacheSelectors=function(){this.textContainer=this.el.querySelectorAll(".font-example-text"),this.imageContainer=this.el.querySelectorAll(".js-font-image-main"),this.modalForm=this.el.querySelector(".js-font-modal-form"),this.modalClose=this.el.querySelector(".js-font-modal-close"),this.modalContainer=this.el.querySelector(".js-modal-container")},Font.prototype.updateFontExampleText=function(a){a.preventDefault();var b=a.target.value;0===b.length&&(b="Enter your preview text");for(var c=0;c<this.textContainer.length;c++)this.textContainer[c].textContent=b},Font.prototype.updateFontExampleSize=function(a){a.preventDefault();for(var b=a.target.value,c=0;c<this.textContainer.length;c++)this.textContainer[c].style["font-size"]=b+"px"},Font.prototype.updateFontImageThumbnail=function(a){a.preventDefault();for(var b=0;b<this.imageContainer.length;b++)this.imageContainer[b].src=a.target.src},Font.prototype.openDownloadModal=function(a){a.preventDefault();var b=a.target.href,c=window.localStorage.getItem("hideEmailModal"),d=a.target.dataset.gaCategory,e=a.target.dataset.gaAction;if(c)ga("send","event",d,e,"Download"),window.location=b;else{var f=new Modal({modal:this.modalContainer,callback:function(){window.location=b,window.localStorage.setItem("hideEmailModal",!0)}});ga("send","event",d,e,"Download Modal"),f.openModal(a)}},Font.prototype.updateDownloadModal=function(a){this.modalForm.classList.add("hidden"),this.modalClose.innerHTML="I got 'em. Now download that font!"},Contact.prototype=new View,Contact.prototype.removeError=function(a){a.preventDefault(),a.target.classList.remove("is-required")},Contact.prototype.sendMessage=function(a){if(a.preventDefault(),!this.validateForm())return!1;a.target.classList.add("is-processing");var b=this,c=new XMLHttpRequest,d={senderEmail:this.el.senderEmail.value,senderName:this.el.senderName.value,subject:this.el.subject.value,message:this.el.message.value};c.open("POST","/services/contact/send"),c.setRequestHeader("Content-Type","application/json; charset=UTF-8"),c.onload=function(){if(200===c.status){var d=JSON.parse(c.responseText);b.afterSend.call(b,d,a)}},c.send(JSON.stringify(d))},Contact.prototype.afterSend=function(a,b){a.success&&(window.location="contact/confirm")},Contact.prototype.validateForm=function(){var a=!0,b=/\S+@\S+\.\S+/,c={senderEmail:this.el.senderEmail,senderName:this.el.senderName,subject:this.el.subject,message:this.el.message};for(var d in c)c.hasOwnProperty(d)&&c[d].value.length<1&&(c[d].classList.add("is-required"),a=!1);return b.test(c.senderEmail.value)||(c.senderEmail.classList.add("is-required"),a=!1),a},function(){new All;if(window.location.href.indexOf("fonts/")!==-1){new Font}if(window.location.href.indexOf("contact")!==-1){new Contact}}();