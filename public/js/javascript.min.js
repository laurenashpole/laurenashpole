/*
 laurenashpole 2017-03-13 
*/
function View(){this.cacheSelectors(),this.initEvents()}function ContactForm(){View.call(this)}View.prototype.cacheSelectors=function(){this.nav=document.querySelector(".nav"),this.textContainer=document.querySelectorAll(".font-example-text"),this.imageContainer=document.querySelectorAll(".js-font-image-main")},View.prototype.initEvents=function(){this.addEventListener(".js-nav-icon","click",this.toggleNav.bind(this)),this.addEventListener(".js-ga-trigger","click",this.sendGA.bind(this)),this.addEventListener(".js-font-example-input","keyup",this.updateFontExampleText.bind(this)),this.addEventListener(".js-font-example-size","change",this.updateFontExampleSize.bind(this)),this.addEventListener(".js-font-image-thumbnail","click",this.updateFontImageThumbnail.bind(this))},View.prototype.addEventListener=function(a,b,c){for(var d=document.querySelectorAll(a),e=0;e<d.length;e++)d[e].addEventListener(b,function(a){c instanceof Function&&c(a)})},View.prototype.toggleNav=function(a){a.preventDefault(),this.nav.classList.contains("is-open")?this.nav.classList.remove("is-open"):this.nav.classList.add("is-open")},View.prototype.updateFontExampleText=function(a){a.preventDefault();var b=a.target.value;0===b.length&&(b="Enter your preview text");for(var c=0;c<this.textContainer.length;c++)this.textContainer[c].textContent=b},View.prototype.updateFontExampleSize=function(a){a.preventDefault();for(var b=a.target.value,c=0;c<this.textContainer.length;c++)this.textContainer[c].style["font-size"]=b+"px"},View.prototype.updateFontImageThumbnail=function(a){a.preventDefault();for(var b=0;b<this.imageContainer.length;b++)this.imageContainer[b].src=a.target.src},View.prototype.sendGA=function(a){var b=a.target.dataset.gaCategory,c=a.target.dataset.gaAction,d=a.target.dataset.gaLabel;ga("send","event",b,c,d)};var view=new View;ContactForm.prototype=View.prototype,ContactForm.prototype.constructor=ContactForm,ContactForm.prototype.cacheSelectors=function(){this.contactForm=document.querySelector(".js-contact-form")},ContactForm.prototype.initEvents=function(){this.addEventListener(".js-contact-send","click",this.sendMessage.bind(this)),this.addEventListener(".js-contact-form-input","focus",this.removeError.bind(this))},ContactForm.prototype.removeError=function(a){a.preventDefault(),a.target.classList.remove("is-required")},ContactForm.prototype.sendMessage=function(a){if(a.preventDefault(),!this.validateForm())return!1;a.target.classList.add("is-processing");var b=this,c=new XMLHttpRequest,d={senderEmail:this.contactForm.senderEmail.value,senderName:this.contactForm.senderName.value,subject:this.contactForm.subject.value,message:this.contactForm.message.value};c.open("POST","/services/contact/send"),c.setRequestHeader("Content-Type","application/json; charset=UTF-8"),c.onload=function(){if(200===c.status){var d=JSON.parse(c.responseText);b.afterSend.call(b,d,a)}},c.send(JSON.stringify(d))},ContactForm.prototype.afterSend=function(a,b){a.success&&(window.location="contact/confirm")},ContactForm.prototype.validateForm=function(){var a=!0,b={senderEmail:this.contactForm.senderEmail,senderName:this.contactForm.senderName,subject:this.contactForm.subject,message:this.contactForm.message};for(var c in b)b.hasOwnProperty(c)&&b[c].value.length<1&&(b[c].classList.add("is-required"),a=!1);var d=/\S+@\S+\.\S+/;return d.test(b.senderEmail.value)||(b.senderEmail.classList.add("is-required"),a=!1),a};var contactForm=new ContactForm;